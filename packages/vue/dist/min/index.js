var e={dragStart:!0},t=(t,l={})=>{let c,u,{bounds:f,axis:g="both",gpuAcceleration:h=!0,legacyTranslate:p=!0,transform:m,applyUserSelectHack:y=!0,disabled:w=!1,ignoreMultitouch:b=!1,recomputeBounds:v=e,grid:x,position:E,cancel:A,handle:S,touchAction:C="none",defaultClass:N="neodrag",defaultClassDragging:M="neodrag-dragging",defaultClassDragged:D="neodrag-dragged",defaultPosition:B={x:0,y:0},onDragStart:$,onDrag:R,onDragEnd:H}=l,L=!1,P=0,T=0,X=0,Y=0,k=0,q=0,{x:W,y:U}=E?{x:E?.x??0,y:E?.y??0}:B;V(W,U);let j,z,F,G,I,J="",K=!!E;v={...e,...v};const O=document.body.style,Q=t.classList;function V(e=P,n=T){if(!m){if(p){let r=`${+e}px, ${+n}px`;return s(t,"transform",h?`translate3d(${r}, 0)`:`translate(${r})`)}return s(t,"translate",`${+e}px ${+n}px ${h?"1px":""}`)}const o=m({offsetX:e,offsetY:n,rootNode:t});r(o)&&s(t,"transform",o)}const Z=(e,n)=>{const r={offsetX:P,offsetY:T,rootNode:t,currentNode:I};t.dispatchEvent(new CustomEvent(e,{detail:r})),n?.(r)};const _=addEventListener;_("pointerdown",te,!1),_("pointerup",ne,!1),_("touchend",ne,!1),_("pointermove",re,!1),s(t,"touch-action",C);const ee=()=>{let e=t.offsetWidth/z.width;return isNaN(e)&&(e=1),e};function te(e){if(w)return;if(2===e.button)return;if(b&&!e.isPrimary)return;if(v.dragStart&&(j=i(f,t)),r(S)&&r(A)&&S===A)throw new Error("`handle` selector can't be same as `cancel` selector");if(Q.add(N),F=function(e,t){if(!e)return[t];if(d(e))return[e];if(Array.isArray(e))return e;const n=t.querySelectorAll(e);if(null===n)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(n.values())}(S,t),G=function(e,t){if(!e)return[];if(d(e))return[e];if(Array.isArray(e))return e;const n=t.querySelectorAll(e);if(null===n)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(n.values())}(A,t),c=/(both|x)/.test(g),u=/(both|y)/.test(g),a(G,F))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const n=e.composedPath()[0];if(!F.some((e=>e.contains(n)||e.shadowRoot?.contains(n)))||a(G,[n]))return;I=1===F.length?t:F.find((e=>e.contains(n))),L=!0,z=t.getBoundingClientRect(),y&&(J=O.userSelect,O.userSelect="none"),Z("neodrag:start",$);const{clientX:o,clientY:s}=e,l=ee();c&&(X=o-W/l),u&&(Y=s-U/l),j&&(k=o-z.left,q=s-z.top)}function ne(){L&&(v.dragEnd&&(j=i(f,t)),Q.remove(M),Q.add(D),y&&(O.userSelect=J),Z("neodrag:end",H),c&&(X=P),u&&(Y=T),L=!1)}function re(e){if(!L)return;v.drag&&(j=i(f,t)),Q.add(M),e.preventDefault(),z=t.getBoundingClientRect();let r=e.clientX,a=e.clientY;const s=ee();if(j){const e={left:j.left+k,top:j.top+q,right:j.right+k-z.width,bottom:j.bottom+q-z.height};r=n(r,e.left,e.right),a=n(a,e.top,e.bottom)}if(Array.isArray(x)){let[e,t]=x;if(isNaN(+e)||e<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+t)||t<0)throw new Error("2nd argument of `grid` must be a valid positive number");let n=r-X,i=a-Y;[n,i]=o([e/s,t/s],n,i),r=X+n,a=Y+i}c&&(P=Math.round((r-X)*s)),u&&(T=Math.round((a-Y)*s)),W=P,U=T,Z("neodrag",R),V()}return{destroy:()=>{const e=removeEventListener;e("pointerdown",te,!1),e("pointerup",ne,!1),e("pointermove",re,!1)},update:t=>{g=t.axis||"both",w=t.disabled??!1,b=t.ignoreMultitouch??!1,S=t.handle,f=t.bounds,v=t.recomputeBounds??e,A=t.cancel,y=t.applyUserSelectHack??!0,x=t.grid,h=t.gpuAcceleration??!0,p=t.legacyTranslate??!0,m=t.transform;const n=Q.contains(D);Q.remove(N,D),N=t.defaultClass??"neodrag",M=t.defaultClassDragging??"neodrag-dragging",D=t.defaultClassDragged??"neodrag-dragged",Q.add(N),n&&Q.add(D),K&&(W=P=t.position?.x??P,U=T=t.position?.y??T,V())}}},n=(e,t,n)=>Math.min(Math.max(e,t),n),r=e=>"string"==typeof e,o=([e,t],n,r)=>{const o=(e,t)=>0===t?0:Math.ceil(e/t)*t;return[o(n,e),o(r,t)]};var a=(e,t)=>e.some((e=>t.some((t=>e.contains(t)))));function i(e,t){if(void 0===e)return;if(d(e))return e.getBoundingClientRect();if("object"==typeof e){const{top:t=0,left:n=0,right:r=0,bottom:o=0}=e;return{top:t,right:window.innerWidth-r,bottom:window.innerHeight-o,left:n}}if("parent"===e)return t.parentNode.getBoundingClientRect();const n=document.querySelector(e);if(null===n)throw new Error("The selector provided for bound doesn't exists in the document.");return n.getBoundingClientRect()}var s=(e,t,n)=>e.style.setProperty(t,n),d=e=>e instanceof HTMLElement,l=new WeakMap,c={mounted:(e,{value:n={}})=>!l.has(e)&&l.set(e,t(e,n)),updated:(e,{value:t={}})=>l.get(e).update(t),unmounted:e=>{l.get(e).destroy(),l.delete(e)}};export{c as vDraggable};