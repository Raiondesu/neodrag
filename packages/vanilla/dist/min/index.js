var t={dragStart:!0},e=(e,c={})=>{let l,u,{bounds:f,axis:g="both",gpuAcceleration:p=!0,legacyTranslate:h=!0,transform:m,applyUserSelectHack:y=!0,disabled:b=!1,ignoreMultitouch:w=!1,recomputeBounds:v=t,grid:x,position:E,cancel:A,handle:S,touchAction:C="none",defaultClass:N="neodrag",defaultClassDragging:_="neodrag-dragging",defaultClassDragged:D="neodrag-dragged",defaultPosition:M={x:0,y:0},onDragStart:B,onDrag:$,onDragEnd:R}=c,j=!1,I=0,H=0,L=0,P=0,T=0,X=0,{x:Y,y:k}=E?{x:E?.x??0,y:E?.y??0}:M;Q(Y,k);let q,O,U,W,z,F="",G=!!E;v={...t,...v};const J=document.body.style,K=e.classList;function Q(t=I,n=H){if(!m){if(h){let o=`${+t}px, ${+n}px`;return s(e,"transform",p?`translate3d(${o}, 0)`:`translate(${o})`)}return s(e,"translate",`${+t}px ${+n}px ${p?"1px":""}`)}const r=m({offsetX:t,offsetY:n,rootNode:e});o(r)&&s(e,"transform",r)}const V=(t,n)=>{const o={offsetX:I,offsetY:H,rootNode:e,currentNode:z};e.dispatchEvent(new CustomEvent(t,{detail:o})),n?.(o)};const Z=addEventListener;let tt;if(Z("pointerdown",nt,!1),Z("pointerup",ot,!1),Z("pointermove",rt,!1),"function"==typeof C)C(e,(t=>s(e,"touch-action",t)));else if("string"==typeof C)s(e,"touch-action",C);else{const t=Object.keys(C).map((t=>Number(t))).sort(((t,e)=>e-t));tt=n=>{const o=t.find((t=>n>=t));if("object"!=typeof C||"number"!=typeof o||"object"==typeof C&&!(o in C))return;const r=C[o];"string"==typeof r&&s(e,"touch-action",r)}}const et=()=>{let t=e.offsetWidth/O.width;return isNaN(t)&&(t=1),t};function nt(t){if(b)return;if(2===t.button)return;if(w&&!t.isPrimary)return;if(v.dragStart&&(q=a(f,e)),o(S)&&o(A)&&S===A)throw new Error("`handle` selector can't be same as `cancel` selector");if(K.add(N),U=function(t,e){if(!t)return[e];if(d(t))return[t];if(Array.isArray(t))return t;const n=e.querySelectorAll(t);if(null===n)throw new Error("Selector passed for `handle` option should be child of the element on which the action is applied");return Array.from(n.values())}(S,e),W=function(t,e){if(!t)return[];if(d(t))return[t];if(Array.isArray(t))return t;const n=e.querySelectorAll(t);if(null===n)throw new Error("Selector passed for `cancel` option should be child of the element on which the action is applied");return Array.from(n.values())}(A,e),l=/(both|x)/.test(g),u=/(both|y)/.test(g),i(W,U))throw new Error("Element being dragged can't be a child of the element on which `cancel` is applied");const n=t.composedPath()[0];if(!U.some((t=>t.contains(n)||t.shadowRoot?.contains(n)))||i(W,[n]))return;z=1===U.length?e:U.find((t=>t.contains(n))),j=!0,O=e.getBoundingClientRect(),y&&(F=J.userSelect,J.userSelect="none"),V("neodrag:start",B);const{clientX:r,clientY:s}=t,c=et();l&&(L=r-Y/c),u&&(P=s-k/c),q&&(T=r-O.left,X=s-O.top)}function ot(){j&&(v.dragEnd&&(q=a(f,e)),K.remove(_),K.add(D),y&&(J.userSelect=F),V("neodrag:end",R),l&&(L=I),u&&(P=H),j=!1)}function rt(t){if(!j)return;v.drag&&(q=a(f,e)),K.add(_),t.preventDefault(),O=e.getBoundingClientRect();let o=t.clientX,i=t.clientY;const s=et();if(q){const t={left:q.left+T,top:q.top+X,right:q.right+T-O.width,bottom:q.bottom+X-O.height};o=n(o,t.left,t.right),i=n(i,t.top,t.bottom)}if(Array.isArray(x)){let[t,e]=x;if(isNaN(+t)||t<0)throw new Error("1st argument of `grid` must be a valid positive number");if(isNaN(+e)||e<0)throw new Error("2nd argument of `grid` must be a valid positive number");let n=o-L,a=i-P;[n,a]=r([t/s,e/s],n,a),o=L+n,i=P+a}if(l&&(I=Math.round((o-L)*s)),u&&(H=Math.round((i-P)*s)),Y=I,k=H,tt){tt(o*o+i*i-(L*L+P*P))}V("neodrag",$),Q()}return{destroy:()=>{const t=removeEventListener;t("pointerdown",nt,!1),t("pointerup",ot,!1),t("pointermove",rt,!1)},update:e=>{g=e.axis||"both",b=e.disabled??!1,w=e.ignoreMultitouch??!1,S=e.handle,f=e.bounds,v=e.recomputeBounds??t,A=e.cancel,y=e.applyUserSelectHack??!0,x=e.grid,p=e.gpuAcceleration??!0,h=e.legacyTranslate??!0,m=e.transform;const n=K.contains(D);K.remove(N,D),N=e.defaultClass??"neodrag",_=e.defaultClassDragging??"neodrag-dragging",D=e.defaultClassDragged??"neodrag-dragged",K.add(N),n&&K.add(D),G&&(Y=I=e.position?.x??I,k=H=e.position?.y??H,Q())}}},n=(t,e,n)=>Math.min(Math.max(t,e),n),o=t=>"string"==typeof t,r=([t,e],n,o)=>{const r=(t,e)=>0===e?0:Math.ceil(t/e)*e;return[r(n,t),r(o,e)]};var i=(t,e)=>t.some((t=>e.some((e=>t.contains(e)))));function a(t,e){if(void 0===t)return;if(d(t))return t.getBoundingClientRect();if("object"==typeof t){const{top:e=0,left:n=0,right:o=0,bottom:r=0}=t;return{top:e,right:window.innerWidth-o,bottom:window.innerHeight-r,left:n}}if("parent"===t)return e.parentNode.getBoundingClientRect();const n=document.querySelector(t);if(null===n)throw new Error("The selector provided for bound doesn't exists in the document.");return n.getBoundingClientRect()}var s=(t,e,n)=>t.style.setProperty(e,n),d=t=>t instanceof HTMLElement,c=class{constructor(t,n={}){this.node=t,this._dragInstance=e(t,this._options=n)}_dragInstance;_options={};updateOptions(t){this._dragInstance.update(Object.assign(this._options,t))}set options(t){this._dragInstance.update(this._options=t)}get options(){return this._options}destroy(){this._dragInstance.destroy()}};export{c as Draggable};